Turbo Assembler	 Version 4.1	    03/01/20 19:37:05	    Page 1
func.asm



      1				     locals @@
      2				     .186
      3	0000			     .model tiny
      4
      5	0000			     .data
      6	0000  71 77 65 72 74 79	61+  Buffer:	 db "qwertyandzxcv$"
      7	      6E 64 7A 78 63 76	24
      8	000E  71 77 65 72 74 79	62+  Buffer2:	 db "qwertybbbbbbb$"
      9	      62 62 62 62 62 62	24
     10
     11	001C			     .code
     12				     org 100h
     13
     14	0100			     Start:	 ;call FillZero
     15
     16	0100  BE 000Er				 lea si, Buffer2
     17	0103  BF 0000r				 lea di, Buffer
     18	0106  B9 000E				 mov cx, 14
     19	0109  E8 0016				 call Memcmp
     20	010C  B4 0F				 mov ah, 0fh
     21
     22	010E  BA B800				 mov dx, 0b800h
     23	0111  8E C2				 mov es, dx
     24	0113  BF 07D0				 mov di, (80d*12d + 40d)*2
     25	0116  AB				 stosw
     26
     27
     28				     ;========================================================
     29				     ;Memchr func from C
     30				     ;
     31				     ;Entry:
     32				     ;di - pointer to buffer
     33				     ;al - character
     34				     ;cx - max number of characters to examine
     35				     ;
     36				     ;Exit:
     37				     ;di - pointer to character
     38				     ;Destr:
     39				     ;al, cx, di
     40				     ;========================================================
     41	0117			     Memchr	 proc
     42	0117  FC				 cld
     43	0118  F2> AE				 repne scasb
     44	011A  75 02				 jne @@NotFound
     45	011C  4F				 dec di
     46	011D  C3				 ret
     47
     48	011E  BF 0000		     @@NotFound: mov di, 0
     49	0121  C3				 ret
     50	0122					 endp
     51
     52				     ;========================================================
     53				     ;Memcmp func from C
     54				     ;
     55				     ;Entry:
     56				     ;si - pointer to buffer1
     57				     ;di - pointer to buffer2
Turbo Assembler	 Version 4.1	    03/01/20 19:37:05	    Page 2
func.asm



     58				     ;cx - max number of characters to examine
     59				     ;
     60				     ;Exit:
     61				     ;al > 0 if	si > di
     62				     ;al = 0 if	si = di
     63				     ;al < 0 if	si < di
     64				     ;Destr:
     65				     ;cx, di, bx
     66				     ;========================================================
     67	0122			     Memcmp	 proc
     68	0122  FC				 cld
     69	0123  F3> A6				 repe cmpsb
     70
     71	0125  8A 04				 mov al, [si]
     72	0127  2A 05				 sub al, [di]
     73	0129  C3				 ret
     74	012A					 endp
     75
     76				     ;========================================================
     77				     ;Fill screen with zero
     78				     ;
     79				     ;Destr:
     80				     ;ax, es, bx, cx
     81				     ;========================================================
     82	012A			     FillZero	 proc
     83	012A  B8 B800				 mov ax, 0b800h
     84	012D  8E C0					     mov es, ax
     85	012F  BB 0000					     mov bx, 0
     86
     87	0132  B9 0FA0					     mov cx, (80d*25d)*2d
     88	0135  26: C6 07	00	     @@Fill:	     mov byte ptr es: [bx], 0
     89	0139  43					     inc bx
     90	013A  26: C6 07	00				     mov byte ptr es: [bx], 0
     91	013E  43					     inc bx
     92	013F  3B D9					     cmp bx, cx
     93	0141  72 F2					     jb	@@Fill
     94	0143  C3				 ret
     95
     96	0144					 endp
     97
     98
     99
    100				     end Start
Turbo Assembler	 Version 4.1	    03/01/20 19:37:05	    Page 3
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "03/01/20"
??FILENAME			  Text	 "func	  "
??TIME				  Text	 "19:37:05"
??VERSION			  Number 040A
@32BIT				  Text	 0
@@FILL				  Near	 DGROUP:0135
@@NOTFOUND			  Near	 DGROUP:011E
@CODE				  Text	 DGROUP
@CODESIZE			  Text	 0
@CPU				  Text	 0103H
@CURSEG				  Text	 _TEXT
@DATA				  Text	 DGROUP
@DATASIZE			  Text	 0
@FILENAME			  Text	 FUNC
@INTERFACE			  Text	 000H
@MODEL				  Text	 1
@STACK				  Text	 DGROUP
@WORDSIZE			  Text	 2
BUFFER				  Near	 DGROUP:0000
BUFFER2				  Near	 DGROUP:000E
FILLZERO			  Near	 DGROUP:012A
MEMCHR				  Near	 DGROUP:0117
MEMCMP				  Near	 DGROUP:0122
START				  Near	 DGROUP:0100

Groups & Segments		  Bit Size Align  Combine Class

DGROUP				  Group
  _DATA				  16  001C Word	  Public  DATA
  _TEXT				  16  0144 Word	  Public  CODE
